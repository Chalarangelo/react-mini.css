<!DOCTYPE html>
<html>
  <head>
    <title>HTML5 sample page</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
		<link rel="stylesheet" href="https://gitcdn.link/repo/Chalarangelo/mini.css/master/dist/mini-default.min.css">
		<script src="https://unpkg.com/react@latest/dist/react.js"></script>
    <script src="https://unpkg.com/react-dom@latest/dist/react-dom.js"></script>
    <script src="https://unpkg.com/babel-standalone@6.15.0/babel.min.js"></script>
  </head>
  <body>
		<div id="root"></div>
    <script type="text/babel">

		function generateUniqueId(){
		    // always start with a letter (for DOM friendlyness)
		    var idstr=String.fromCharCode(Math.floor((Math.random()*25)+65));
		    do {
		        // between numbers and characters (48 is 0 and 90 is Z (42-48 = 90)
		        var ascicode=Math.floor((Math.random()*42)+48);
		        if (ascicode<58 || ascicode>64){
		            // exclude all chars between : (58) and @ (64)
		            idstr+=String.fromCharCode(ascicode);
		        }
		    } while (idstr.length<32);
		    return (idstr);
		}

		var modalClassName = 'modal';
		var cardClassName = 'card';
		var closeClassName = 'close';

		// Modal component.
		function Modal(props){
			var outProps = Object.assign({},props);
			if (typeof outProps.id === 'undefined')	outProps.id = 'modal_'+ generateUniqueId();
			if (typeof outProps.noLabel === 'undefined')	outProps.noLabel = false;
			if (!outProps.noLabel && typeof outProps.labelText === 'undefined') outProps.labelText = 'Open modal dialog';
			console.log(outProps.labelText);
			outProps.modalCardChildren = (Array.isArray(outProps.children)) ? outProps.children : [outProps.children];
			outProps.modalCardChildren.push(
				React.createElement(
					'label', {
						'htmlFor': outProps.id,
						className: closeClassName,
						key: outProps.id+'_close'
					}
				)
			);
			if (typeof outProps.className === 'undefined') outProps.className = cardClassName;
			else outProps.className += ' ' + cardClassName;
			outProps.modalChildren = [];
			outProps.modalChildren.push(
				React.createElement(
					'div', {
						className: outProps.className,
						key: outProps.id+'_card'
					}, outProps.modalCardChildren
				)
			);
			outProps.childrenToRender = [];
			if (!outProps.noLabel) {
				outProps.childrenToRender.push(
					React.createElement(
						'label', {
							'htmlFor' : outProps.id,
							key: outProps.id+'_label'
						}, outProps.labelText
					)
				);
			}
			outProps.childrenToRender.push(
				React.createElement(
					'input',{
						type: 'checkbox',
						id : outProps.id,
						key: outProps.id+'_toggle',
						defaultChecked : false}
				)
			);
			outProps.childrenToRender.push(
				React.createElement(
					'div', {
						className: modalClassName,
						key: outProps.id+'_modal'
					}, outProps.modalChildren
				)
			);
			var childrenToRender = outProps.childrenToRender;
			delete outProps.modalChildren;
			delete outProps.childrenToRender;
			delete outProps.className;
			delete outProps.noLabel;
			delete outProps.modalCardChildren;
			delete outProps.labelText;
			outProps.id = outProps.id+'wrapper';
			return React.createElement(
				'div',outProps, childrenToRender
			);
		}


		ReactDOM.render(
			<Modal><h1>Hello</h1></Modal>,
  		document.getElementById('root')
		);

    </script>
  </body>
</html>
